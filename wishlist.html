<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Wishlist | AmaClone</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Wishlist specific styles */
        .wishlist-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        .wishlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .wishlist-header h1 {
            font-size: 28px;
            font-weight: normal;
        }
        
        .wishlist-actions {
            display: flex;
            gap: 10px;
        }
        
        .wishlist-actions select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .wishlist-actions button {
            padding: 8px 15px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background-color: #f0f2f2;
            cursor: pointer;
        }
        
        .wishlist-actions button:hover {
            background-color: #e7e9ec;
        }
        
        .wishlist-content {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .wishlist-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .wishlist-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            position: relative;
        }
        
        .wishlist-item-image {
            height: 180px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .wishlist-item-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .wishlist-item-title {
            font-size: 16px;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .wishlist-item-title a {
            color: #0066c0;
            text-decoration: none;
        }
        
        .wishlist-item-title a:hover {
            color: #c45500;
            text-decoration: underline;
        }
        
        .wishlist-item-price {
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .wishlist-item-rating {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .wishlist-item-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .wishlist-item-actions button {
            width: 100%;
            padding: 8px 0;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .add-to-cart-btn {
            background-color: #ffd814;
            border: none;
        }
        
        .add-to-cart-btn:hover {
            background-color: #f7ca00;
        }
        
        .remove-btn {
            background-color: #f0f2f2;
            border: 1px solid #d5d9d9;
        }
        
        .remove-btn:hover {
            background-color: #e7e9ec;
        }
        
        .wishlist-date {
            font-size: 12px;
            color: #565959;
            margin-top: 10px;
        }
        
        .empty-wishlist {
            text-align: center;
            padding: 40px 0;
        }
        
        .empty-wishlist i {
            font-size: 48px;
            color: #ddd;
            margin-bottom: 20px;
        }
        
        .empty-wishlist h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .empty-wishlist p {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="index.html">AmaClone</a>
            </div>
            <div class="search-bar">
                <select name="category" id="category-select">
                    <option value="all">All</option>
                    <option value="electronics">Electronics</option>
                    <option value="clothing">Clothing</option>
                    <option value="books">Books</option>
                    <option value="home">Home & Kitchen</option>
                </select>
                <input type="text" placeholder="Search AmaClone">
                <button type="submit"><i class="fas fa-search"></i></button>
            </div>
            <div class="header-nav">
                <div class="nav-item">
                    <span class="nav-line-1">Hello, Sign in</span>
                    <span class="nav-line-2">Account & Lists</span>
                </div>
                <div class="nav-item">
                    <span class="nav-line-1">Returns</span>
                    <span class="nav-line-2">& Orders</span>
                </div>
                <div class="nav-item cart">
                    <a href="cart.html">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count">0</span>
                    </a>
                </div>
            </div>
        </div>
        <nav class="sub-nav">
            <ul>
                <li><a href="#"><i class="fas fa-bars"></i> All</a></li>
                <li><a href="products-page.html?category=electronics">Electronics</a></li>
                <li><a href="products-page.html?category=clothing">Clothing</a></li>
                <li><a href="products-page.html?category=books">Books</a></li>
                <li><a href="products-page.html?category=home">Home & Kitchen</a></li>
                <li><a href="products-page.html?category=toys">Toys</a></li>
                <li><a href="products-page.html">All Products</a></li>
            </ul>
        </nav>
    </header>

    <main class="wishlist-container">
        <div class="wishlist-header">
            <h1>Your Wishlist</h1>
            <div class="wishlist-actions">
                <select id="wishlist-sort">
                    <option value="date-desc">Sort by: Most recent</option>
                    <option value="price-asc">Price: Low to High</option>
                    <option value="price-desc">Price: High to Low</option>
                    <option value="rating">Average Customer Review</option>
                </select>
                <button id="create-list-btn"><i class="fas fa-plus"></i> Create a List</button>
            </div>
        </div>
        
        <div class="wishlist-content">
            <div id="wishlist-items" class="wishlist-items">
                <!-- Wishlist items will be dynamically added here -->
            </div>
            
            <div id="empty-wishlist" class="empty-wishlist">
                <i class="far fa-heart"></i>
                <h2>Your wishlist is empty</h2>
                <p>Add items you want to shop for later</p>
                <a href="products-page.html" class="btn">Continue shopping</a>
            </div>
        </div>
    </main>

    <div class="back-to-top" id="back-to-top">
        <i class="fas fa-chevron-up"></i> Back to top
    </div>

    <footer>
        <div class="footer-links">
            <div class="footer-column">
                <h3>Get to Know Us</h3>
                <ul>
                    <li><a href="about.html">About AmaClone</a></li>
                    <li><a href="careers.html">Careers</a></li>
                    <li><a href="corporate-info.html">Corporate Information</a></li>
                    <li><a href="press-releases.html">Press Releases</a></li>
                    <li><a href="community.html">Community Impact</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Make Money with Us</h3>
                <ul>
                    <li><a href="sell.html">Sell on AmaClone</a></li>
                    <li><a href="affiliate.html">Become an Affiliate</a></li>
                    <li><a href="advertise.html">Advertise Your Products</a></li>
                    <li><a href="publish.html">Self-Publish with Us</a></li>
                    <li><a href="partner.html">Become a Partner</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Customer Service</h3>
                <ul>
                    <li><a href="account.html">Your Account</a></li>
                    <li><a href="shipping-policy.html">Shipping Rates & Policies</a></li>
                    <li><a href="returns.html">Returns & Replacements</a></li>
                    <li><a href="help.html">Help Center</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Connect with Us</h3>
                <ul>
                    <li><a href="https://www.facebook.com/" target="_blank">Facebook</a></li>
                    <li><a href="https://twitter.com/" target="_blank">Twitter</a></li>
                    <li><a href="https://www.instagram.com/" target="_blank">Instagram</a></li>
                    <li><a href="blog.html">Our Blog</a></li>
                    <li><a href="newsletter.html">Subscribe to Newsletter</a></li>
                </ul>
            </div>
        </div>
        
        <div class="social-links">
            <a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="https://twitter.com/" target="_blank"><i class="fab fa-twitter"></i></a>
            <a href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://www.linkedin.com/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
            <a href="https://www.youtube.com/" target="_blank"><i class="fab fa-youtube"></i></a>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 AmaClone India. All Rights Reserved.@Tahsin Raza</p>
        </div>
    </footer>

    <div id="notification-container"></div>
    
    <script src="products_india.js"></script>
    <script src="products_india2.js"></script>
    <script src="script.js"></script>
    <script src="auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            if (!userManager || !userManager.isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }
            
            const wishlistItems = document.getElementById('wishlist-items');
            const emptyWishlist = document.getElementById('empty-wishlist');
            
            // Get user's wishlist
            let wishlist = [];
            if (userManager.currentUser.wishlist) {
                wishlist = userManager.currentUser.wishlist;
            }
            
            // Display wishlist items or empty state
            if (wishlist.length === 0) {
                wishlistItems.style.display = 'none';
                emptyWishlist.style.display = 'block';
            } else {
                wishlistItems.style.display = 'grid';
                emptyWishlist.style.display = 'none';
                
                // Display wishlist items
                displayWishlist(wishlist);
            }
            
            // Sort wishlist
            document.getElementById('wishlist-sort').addEventListener('change', function() {
                const sortBy = this.value;
                sortWishlist(wishlist, sortBy);
            });
            
            // Create new list button
            document.getElementById('create-list-btn').addEventListener('click', function() {
                if (typeof window.showNotification === 'function') {
                    window.showNotification('Creating multiple lists is not implemented in this demo', 'info');
                } else {
                    alert('Creating multiple lists is not implemented in this demo');
                }
            });
        });
        
        function displayWishlist(wishlist) {
            const wishlistItems = document.getElementById('wishlist-items');
            wishlistItems.innerHTML = '';
            
            wishlist.forEach(item => {
                const product = allProducts.find(p => p.id === item.productId);
                if (product) {
                    const wishlistItem = createWishlistItem(product, item.dateAdded);
                    wishlistItems.appendChild(wishlistItem);
                }
            });
        }
        
        function createWishlistItem(product, dateAdded) {
            const item = document.createElement('div');
            item.classList.add('wishlist-item');
            
            const imageDiv = document.createElement('div');
            imageDiv.classList.add('wishlist-item-image');
            
            const image = document.createElement('img');
            image.src = product.images[0];
            image.alt = product.name;
            imageDiv.appendChild(image);
            
            const title = document.createElement('div');
            title.classList.add('wishlist-item-title');
            
            const titleLink = document.createElement('a');
            titleLink.href = `product.html?id=${product.id}`;
            titleLink.textContent = product.name;
            title.appendChild(titleLink);
            
            const price = document.createElement('div');
            price.classList.add('wishlist-item-price');
            price.textContent = `$${product.price.toFixed(2)}`;
            
            const rating = document.createElement('div');
            rating.classList.add('wishlist-item-rating');
            rating.innerHTML = generateRatingStars(product.rating);
            
            const actions = document.createElement('div');
            actions.classList.add('wishlist-item-actions');
            
            const addToCartBtn = document.createElement('button');
            addToCartBtn.classList.add('add-to-cart-btn');
            addToCartBtn.textContent = 'Add to Cart';
            addToCartBtn.addEventListener('click', function() {
                addToCart(product, 1, true);
            });
            
            const removeBtn = document.createElement('button');
            removeBtn.classList.add('remove-btn');
            removeBtn.textContent = 'Remove from List';
            removeBtn.addEventListener('click', function() {
                removeFromWishlist(product.id);
            });
            
            actions.appendChild(addToCartBtn);
            actions.appendChild(removeBtn);
            
            const date = document.createElement('div');
            date.classList.add('wishlist-date');
            date.textContent = `Added ${formatDate(dateAdded)}`;
            
            item.appendChild(imageDiv);
            item.appendChild(title);
            item.appendChild(price);
            item.appendChild(rating);
            item.appendChild(actions);
            item.appendChild(date);
            
            return item;
        }
        
        function removeFromWishlist(productId) {
            if (!userManager || !userManager.isLoggedIn()) {
                return;
            }
            
            // Get current wishlist
            let wishlist = [];
            if (userManager.currentUser.wishlist) {
                wishlist = userManager.currentUser.wishlist;
            }
            
            // Remove item
            wishlist = wishlist.filter(item => item.productId !== productId);
            
            // Update user profile
            userManager.updateProfile({ wishlist: wishlist });
            
            // Show notification
            if (typeof window.showNotification === 'function') {
                window.showNotification('Item removed from your wishlist', 'success');
            }
            
            // Refresh wishlist display
            if (wishlist.length === 0) {
                document.getElementById('wishlist-items').style.display = 'none';
                document.getElementById('empty-wishlist').style.display = 'block';
            } else {
                displayWishlist(wishlist);
            }
        }
        
        function sortWishlist(wishlist, sortBy) {
            const sortedWishlist = [...wishlist];
            
            switch (sortBy) {
                case 'price-asc':
                    sortedWishlist.sort((a, b) => {
                        const productA = allProducts.find(p => p.id === a.productId);
                        const productB = allProducts.find(p => p.id === b.productId);
                        return productA.price - productB.price;
                    });
                    break;
                case 'price-desc':
                    sortedWishlist.sort((a, b) => {
                        const productA = allProducts.find(p => p.id === a.productId);
                        const productB = allProducts.find(p => p.id === b.productId);
                        return productB.price - productA.price;
                    });
                    break;
                case 'rating':
                    sortedWishlist.sort((a, b) => {
                        const productA = allProducts.find(p => p.id === a.productId);
                        const productB = allProducts.find(p => p.id === b.productId);
                        return productB.rating - productA.rating;
                    });
                    break;
                default: // date-desc (most recent first)
                    sortedWishlist.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
                    break;
            }
            
            displayWishlist(sortedWishlist);
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            
            // If date is today
            if (date.toDateString() === now.toDateString()) {
                return 'today';
            }
            
            // If date is yesterday
            const yesterday = new Date(now);
            yesterday.setDate(now.getDate() - 1);
            if (date.toDateString() === yesterday.toDateString()) {
                return 'yesterday';
            }
            
            // If date is within the last week
            const oneWeekAgo = new Date(now);
            oneWeekAgo.setDate(now.getDate() - 7);
            if (date > oneWeekAgo) {
                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                return `on ${days[date.getDay()]}`;
            }
            
            // Default format for older dates
            return `on ${date.toLocaleDateString()}`;
        }
    </script>
</body>
</html> 